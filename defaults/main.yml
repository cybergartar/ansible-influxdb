---
grafana_service_name: grafana-server

# Package variables
grafana_apt_key_url: https://packagecloud.io/gpg.key
grafana_apt_key_id: C2E73424D59097AB
grafana_apt_repo: deb https://packagecloud.io/grafana/stable/debian/ jessie main

# General variables
grafana_user: grafana
grafana_group: grafana
grafana_dir_home: /usr/share/grafana
grafana_dir_log: /var/log/grafana
grafana_dir_data: /var/lib/grafana
grafana_dir_config: /etc/grafana
grafana_dir_plugins: /var/lib/grafana/plugins
grafana_dir_default: /etc/default
grafana_environment_filepath: "{{ grafana_dir_default }}/grafana-server"
grafana_config_filepath: "{{ grafana_dir_config }}/grafana.ini"
grafana_max_open_files: 10000
grafana_restart_on_upgrade: 'true'

# MySQL credential
# If database have not privileges, empty dict
#grafana_privileges_credential: {}
#
grafana_privileges_credential:
  database:
    priv_user: root
    priv_password: CHANGEME
    priv_host:
      - '%'
      - localhost
grafana_database_config:
  database:
    type: mysql # Either "mysql", "postgres" or "sqlite3", it's your choice
    host: 127.0.0.1:3306
    name: grafana
    user: grafana
    password: CHANGEME # If the password contains # or ; you have to wrap it with triple quotes. Ex """#password;"""


# possible values : production, development
app_mode: production
# instance name, defaults to HOSTNAME environment variable value or hostname if HOSTNAME var is empty
instance_name: "{{ ansible_hostname }}"

# Configuration
#   default config see more (https://raw.githubusercontent.com/grafana/grafana/master/conf/defaults.ini)
# FYI
# grafana_config:
#   <tag>:
#     <key>: <value>
#
grafana_config:
  paths:
    data: "{{ grafana_dir_data }}"
    logs: "{{ grafana_dir_log }}"
    plugins: "{{ grafana_dir_plugins }}"

  server:
    protocol: http # http, https, socket
    http_port: 3000
    domain: mon-grafana.lab.opsta.io
    cert_file: ''
    cert_key: ''

  database: # Set at grafana_database_config
    "{{ grafana_database_config.database }}"

  analytics:
    check_for_updates: 'true'

  security:
    admin_user: admin
    admin_password: admin

  users:
    allow_sign_up: 'true'
